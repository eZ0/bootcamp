jQuery(function(t){"use strict";Handlebars.registerHelper("eq",function(t,e,o){return t===e?o.fn(this):o.inverse(this)});var e=13,o=27,i={uuid:function(){var t,e,o="";for(t=0;32>t;t++)e=16*Math.random()|0,(8===t||12===t||16===t||20===t)&&(o+="-"),o+=(12===t?4:16===t?3&e|8:e).toString(16);return o},pluralize:function(t,e){return 1===t?e:e+"s"},store:function(t,e){if(arguments.length>1)return localStorage.setItem(t,JSON.stringify(e));var o=localStorage.getItem(t);return o&&JSON.parse(o)||[]}},n={init:function(){this.todos=i.store("todos-jquery"),this.cacheElements(),this.bindEvents(),new Router({"/:filter":function(t){this.filter=t,this.render()}.bind(this)}).init("/all")},cacheElements:function(){this.todoTemplate=Handlebars.compile(t("#todo-template").html()),this.footerTemplate=Handlebars.compile(t("#footer-template").html()),this.$todoApp=t("#todoapp"),this.$header=this.$todoApp.find("#header"),this.$main=this.$todoApp.find("#main"),this.$footer=this.$todoApp.find("#footer"),this.$newTodo=this.$header.find("#new-todo"),this.$toggleAll=this.$main.find("#toggle-all"),this.$todoList=this.$main.find("#todo-list"),this.$count=this.$footer.find("#todo-count"),this.$clearBtn=this.$footer.find("#clear-completed")},bindEvents:function(){var t=this.$todoList;this.$newTodo.on("keyup",this.create.bind(this)),this.$toggleAll.on("change",this.toggleAll.bind(this)),this.$footer.on("click","#clear-completed",this.destroyCompleted.bind(this)),t.on("change",".toggle",this.toggle.bind(this)),t.on("dblclick","label",this.edit.bind(this)),t.on("keyup",".edit",this.editKeyup.bind(this)),t.on("focusout",".edit",this.update.bind(this)),t.on("click",".destroy",this.destroy.bind(this))},render:function(){var t=this.getFilteredTodos();this.$todoList.html(this.todoTemplate(t)),this.$main.toggle(t.length>0),this.$toggleAll.prop("checked",0===this.getActiveTodos().length),this.renderFooter(),this.$newTodo.focus(),i.store("todos-jquery",this.todos)},renderFooter:function(){var t=this.todos.length,e=this.getActiveTodos().length,o=this.footerTemplate({activeTodoCount:e,activeTodoWord:i.pluralize(e,"item"),completedTodos:t-e,filter:this.filter});this.$footer.toggle(t>0).html(o)},toggleAll:function(e){var o=t(e.target).prop("checked");this.todos.forEach(function(t){t.completed=o}),this.render()},getActiveTodos:function(){return this.todos.filter(function(t){return!t.completed})},getCompletedTodos:function(){return this.todos.filter(function(t){return t.completed})},getFilteredTodos:function(){return"active"===this.filter?this.getActiveTodos():"completed"===this.filter?this.getCompletedTodos():this.todos},destroyCompleted:function(){this.todos=this.getActiveTodos(),this.filter="all",this.render()},indexFromEl:function(e){for(var o=t(e).closest("li").data("id"),i=this.todos,n=i.length;n--;)if(i[n].id===o)return n},create:function(o){var n=t(o.target),r=n.val().trim();o.which===e&&r&&(this.todos.push({id:i.uuid(),title:r,completed:!1}),n.val(""),this.render())},toggle:function(t){var e=this.indexFromEl(t.target);this.todos[e].completed=!this.todos[e].completed,this.render()},edit:function(e){var o=t(e.target).closest("li").addClass("editing").find(".edit");o.val(o.val()).focus()},editKeyup:function(i){i.which===e&&i.target.blur(),i.which===o&&t(i.target).data("abort",!0).blur()},update:function(e){var o=e.target,i=t(o),n=i.val().trim();if(i.data("abort"))return i.data("abort",!1),void this.render();var r=this.indexFromEl(o);n?this.todos[r].title=n:this.todos.splice(r,1),this.render()},destroy:function(t){this.todos.splice(this.indexFromEl(t.target),1),this.render()}};n.init()}),function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t=location.href.indexOf("examples/");return location.href.substr(0,t)}function o(t,o){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var i=new XMLHttpRequest;i.open("GET",e()+t,!0),i.send(),i.onload=function(){200===i.status&&o&&o(i.responseText)}}function i(t,e){if(!(this instanceof i))return new i(t,e);var o,n;if("object"!=typeof t)try{t=JSON.parse(t)}catch(r){return}e&&(o=e.template,n=e.framework),!o&&t.templates&&(o=t.templates.todomvc),!n&&document.querySelector("[data-framework]")&&(n=document.querySelector("[data-framework]").dataset.framework),this.template=o,t.backend?(this.frameworkJSON=t.backend,this.frameworkJSON.issueLabel=n,this.append({backend:!0})):t[n]&&(this.frameworkJSON=t[n],this.frameworkJSON.issueLabel=n,this.append()),this.fetchIssueCount()}var n=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,o=arguments.length;o>e;e++){var i=arguments[e];if(i)for(var n in i)null==t[n]&&(t[n]=i[n])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,o={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(n,r,s){var a;s=t.defaults({},s,t.templateSettings);var l=new RegExp([(s.escape||e).source,(s.interpolate||e).source,(s.evaluate||e).source].join("|")+"|$","g"),c=0,d="__p+='";n.replace(l,function(t,e,r,s,a){return d+=n.slice(c,a).replace(i,function(t){return"\\"+o[t]}),e&&(d+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(d+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),s&&(d+="';\n"+s+"\n__p+='"),c=a+t.length,t}),d+="';\n",s.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{a=new Function(s.variable||"obj","_",d)}catch(h){throw h.source=d,h}if(r)return a(r,t);var u=function(e){return a.call(this,e,t)};return u.source="function("+(s.variable||"obj")+"){\n"+d+"}",u},t}({});"todomvc.com"===location.hostname&&(!function(t,e,o,i,n,r,s){t.GoogleAnalyticsObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,r=e.createElement(o),s=e.getElementsByTagName(o)[0],r.async=1,r.src=i,s.parentNode.insertBefore(r,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-31081062-1","auto"),ga("send","pageview")),i.prototype.append=function(t){var o=document.createElement("aside");if(o.innerHTML=n.template(this.template,this.frameworkJSON),o.className="learn",t&&t.backend){var i=o.querySelector(".source-links"),r=i.firstElementChild,s=i.lastElementChild,a=s.getAttribute("href");s.setAttribute("href",a.substr(a.lastIndexOf("http"))),i.innerHTML=r.outerHTML+s.outerHTML}else{var l=o.querySelectorAll(".demo-link");Array.prototype.forEach.call(l,function(t){"http"!==t.getAttribute("href").substr(0,4)&&t.setAttribute("href",e()+t.getAttribute("href"))})}document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",o.outerHTML)},i.prototype.fetchIssueCount=function(){var t=document.getElementById("issue-count-link");if(t){var e=t.href.replace("https://github.com","https://api.github.com/repos"),o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(e){var o=JSON.parse(e.target.responseText);if(o instanceof Array){var i=o.length;0!==i&&(t.innerHTML="This app has "+i+" open issues",document.getElementById("issue-count").style.display="inline")}},o.send()}},t(),o("learn.json",i)}();