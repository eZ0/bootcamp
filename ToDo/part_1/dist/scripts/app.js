jQuery(function(t){"use strict";Handlebars.registerHelper("eq",function(t,e,o){return t===e?o.fn(this):o.inverse(this)});var e=13,o=27,n={init:function(){this.todos=util.store("todos-jquery"),todoRepo.init(),this.cacheElements(),this.bindEvents(),new Router({"/:filter":function(t){this.filter=t,this.render()}.bind(this)}).init("/all")},cacheElements:function(){this.todoTemplate=Handlebars.compile(t("#todo-template").html()),this.footerTemplate=Handlebars.compile(t("#footer-template").html()),this.$todoApp=t("#todoapp"),this.$header=this.$todoApp.find("#header"),this.$main=this.$todoApp.find("#main"),this.$footer=this.$todoApp.find("#footer"),this.$newTodo=this.$header.find("#new-todo"),this.$toggleAll=this.$main.find("#toggle-all"),this.$todoList=this.$main.find("#todo-list"),this.$count=this.$footer.find("#todo-count"),this.$clearBtn=this.$footer.find("#clear-completed")},bindEvents:function(){var t=this.$todoList;this.$newTodo.on("keyup",this.create.bind(this)),this.$toggleAll.on("change",this.toggleAll.bind(this)),this.$footer.on("click","#clear-completed",this.destroyCompleted.bind(this)),t.on("change",".toggle",this.toggle.bind(this)),t.on("dblclick","label",this.edit.bind(this)),t.on("keyup",".edit",this.editKeyup.bind(this)),t.on("focusout",".edit",this.update.bind(this)),t.on("click",".destroy",this.destroy.bind(this))},render:function(){var t=todoRepo.getList(this.filter);this.$todoList.html(this.todoTemplate(t)),this.$main.toggle(t.length>0),this.$toggleAll.prop("checked",0===todoRepo.getList("active").length),this.renderFooter(),this.$newTodo.focus(),todoRepo.store()},renderFooter:function(){var t=todoRepo.count(),e=todoRepo.count("active"),o=this.footerTemplate({activeTodoCount:e,activeTodoWord:util.pluralize(e,"item"),completedTodos:t-e,filter:this.filter});this.$footer.toggle(t>0).html(o)},toggleAll:function(t){todoRepo.getList(this.filter),this.render()},destroyCompleted:function(){todoRepo.deleteCompleted(),this.filter="all",this.render()},idFromEl:function(e){var o=t(e).closest("li").data("id");return o},create:function(o){var n=t(o.target),i=n.val().trim();o.which===e&&i&&(todoRepo.add(i),n.val(""),this.render())},toggle:function(t){var e=this.idFromEl(t.target),o=todoRepo.get(e);o.completed=!o.completed,this.render()},edit:function(e){var o=t(e.target).closest("li").addClass("editing").find(".edit");o.val(o.val()).focus()},editKeyup:function(n){n.which===e&&n.target.blur(),n.which===o&&t(n.target).data("abort",!0).blur()},update:function(e){var o=e.target,n=t(o),i=n.val().trim();if(n.data("abort"))return n.data("abort",!1),void this.render();var r=this.idFromEl(o);if(i){var a=todoRepo.get(r);a.title=i}else todoRepo.remove(r);this.render()},destroy:function(t){var e=this.idFromEl(t.target);todoRepo.remove(e),this.render()}};n.init()}),function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t=location.href.indexOf("examples/");return location.href.substr(0,t)}function o(t,o){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var n=new XMLHttpRequest;n.open("GET",e()+t,!0),n.send(),n.onload=function(){200===n.status&&o&&o(n.responseText)}}function n(t,e){if(!(this instanceof n))return new n(t,e);var o,i;if("object"!=typeof t)try{t=JSON.parse(t)}catch(r){return}e&&(o=e.template,i=e.framework),!o&&t.templates&&(o=t.templates.todomvc),!i&&document.querySelector("[data-framework]")&&(i=document.querySelector("[data-framework]").dataset.framework),this.template=o,t.backend?(this.frameworkJSON=t.backend,this.frameworkJSON.issueLabel=i,this.append({backend:!0})):t[i]&&(this.frameworkJSON=t[i],this.frameworkJSON.issueLabel=i,this.append()),this.fetchIssueCount()}var i=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,o=arguments.length;o>e;e++){var n=arguments[e];if(n)for(var i in n)null==t[i]&&(t[i]=n[i])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,o={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(i,r,a){var s;a=t.defaults({},a,t.templateSettings);var l=new RegExp([(a.escape||e).source,(a.interpolate||e).source,(a.evaluate||e).source].join("|")+"|$","g"),u=0,d="__p+='";i.replace(l,function(t,e,r,a,s){return d+=i.slice(u,s).replace(n,function(t){return"\\"+o[t]}),e&&(d+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(d+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),a&&(d+="';\n"+a+"\n__p+='"),u=s+t.length,t}),d+="';\n",a.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{s=new Function(a.variable||"obj","_",d)}catch(c){throw c.source=d,c}if(r)return s(r,t);var f=function(e){return s.call(this,e,t)};return f.source="function("+(a.variable||"obj")+"){\n"+d+"}",f},t}({});"todomvc.com"===location.hostname&&(!function(t,e,o,n,i,r,a){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,r=e.createElement(o),a=e.getElementsByTagName(o)[0],r.async=1,r.src=n,a.parentNode.insertBefore(r,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-31081062-1","auto"),ga("send","pageview")),n.prototype.append=function(t){var o=document.createElement("aside");if(o.innerHTML=i.template(this.template,this.frameworkJSON),o.className="learn",t&&t.backend){var n=o.querySelector(".source-links"),r=n.firstElementChild,a=n.lastElementChild,s=a.getAttribute("href");a.setAttribute("href",s.substr(s.lastIndexOf("http"))),n.innerHTML=r.outerHTML+a.outerHTML}else{var l=o.querySelectorAll(".demo-link");Array.prototype.forEach.call(l,function(t){"http"!==t.getAttribute("href").substr(0,4)&&t.setAttribute("href",e()+t.getAttribute("href"))})}document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",o.outerHTML)},n.prototype.fetchIssueCount=function(){var t=document.getElementById("issue-count-link");if(t){var e=t.href.replace("https://github.com","https://api.github.com/repos"),o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(e){var o=JSON.parse(e.target.responseText);if(o instanceof Array){var n=o.length;0!==n&&(t.innerHTML="This app has "+n+" open issues",document.getElementById("issue-count").style.display="inline")}},o.send()}},t(),o("learn.json",n)}();var todoRepo=function(){function t(){d=util.store("todos-jquery")}function e(t){return"active"==t?l():"completed"==t?u():d}function o(){util.store("todos-jquery",d)}function n(t){d.push({id:util.uuid(),title:t,completed:!1})}function i(t){for(var e=d.length;e--;)if(d[e].id===t)return console.log(e),d[e]}function r(t){for(var e=d.length;e--;)d[e].id===t&&d.splice(e,1)}function a(t){var e=d.length,o=l().length;return"active"==t?o:e}function s(){d=l()}function l(){return d.filter(function(t){return!t.completed})}function u(){return d.filter(function(t){return t.completed})}var d=[];return{init:t,add:n,getList:e,store:o,remove:r,get:i,count:a,deleteCompleted:s}}();describe("todoRepo service",function(){describe("init",function(){beforeEach(function(){spyOn(todoRepo,"init").andCallThrough}),it("should be called",function(){todoRepo.init(),expect(todoRepo.init).toHaveBeenCalled()}),it("should be initializing",function(){expect(todoRepo.init).toBeDefined(),todoRepo.init(),expect(todoRepo.init).toHaveBeenCalled()})}),describe("add",function(){beforeEach(function(){todoRepo.init(),todoRepo.add("feed the guinea pig")}),it("should be able to add new task to todo",function(){var t=todoRepo.getList(),e=t.length;todoRepo.add("read about closures in JS");var o=t.length;expect(e).not.toBe(o)})}),describe("getList",function(){beforeEach(function(){todoRepo.init(),todoRepo.add("feed the guinea pig"),todoRepo.add("buy bread and cheese")}),it("should be able to get the list",function(){var t=todoRepo.getList();expect(t.length).toEqual(2)}),it("should be able to get the list of active tasks",function(){var t=todoRepo.getList("active");expect(t[0].completed).toBe(!1)})}),describe("remove",function(){beforeEach(function(){todoRepo.init(),todoRepo.add("feed the guinea pig"),todoRepo.add("buy bread and cheese")}),it("should be able to remove an item from the list",function(){var t=todoRepo.getList(),e=t.length;todoRepo.remove(t[1].id);var o=t.length;expect(e).not.toBe(o)})})});var util={uuid:function(){var t,e,o="";for(t=0;32>t;t++)e=16*Math.random()|0,(8===t||12===t||16===t||20===t)&&(o+="-"),o+=(12===t?4:16===t?3&e|8:e).toString(16);return o},pluralize:function(t,e){return 1>=t||""===t||void 0===t?0===t?e+"s":e:t>1?void 0===e?"undefined":e+"s":void 0},store:function(t,e){if(arguments.length>1)return localStorage.setItem(t,JSON.stringify(e));var o=localStorage.getItem(t);return o&&JSON.parse(o)||[]}};describe("util service",function(){describe("pluralize",function(){it("should return bananas for 2 banana",function(){var t=util.pluralize(2,"banana");expect(t).toBe("bananas")}),it("should return banana for 1 banana",function(){var t=util.pluralize(1,"banana");expect(t).toBe("banana")}),it("should return banana for -1 banana",function(){var t=util.pluralize(-1,"banana");expect(t).toBe("banana")}),it("should return banana for '' & apple",function(){var t=util.pluralize("","apple");expect(t).toBe("apple")}),it("should return banana for '2' banana",function(){var t=util.pluralize("2","banana");expect(t).toBe("bananas")}),it("should return apples for 0 apple",function(){var t=util.pluralize(0,"apple");expect(t).toBe("apples")}),it("should return 'undefined' for 2, undefined ",function(){var t=util.pluralize(2,void 0);expect(t).toBe("undefined")})}),describe("uuid",function(){it("should return random unique string",function(){var t=util.uuid(),e=util.uuid();expect(t).not.toBe(e)}),it("should return string of the same length",function(){var t=util.uuid(),e=util.uuid();expect(t.length).toBe(e.length)})})});